(this.webpackJsonpbip=this.webpackJsonpbip||[]).push([[0],{15:function(e,n,t){e.exports=t(33)},20:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(11),s=t.n(o),i=(t(20),t(1)),l=t(2),u=t(7),c=t(4),h=t(3),m=t(12),p=t.n(m),d=t(14),b=t(13),f=function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){return Object(i.a)(this,t),n.call(this,e)}return Object(l.a)(t,[{key:"handleClick",value:function(){this.props.handleClick()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{key:"square_"+this.props.side+this.props.index,className:"cup cup-"+this.props.side+(this.props.visible?" cup-visible":"")+(this.props.active?"":" cup-inactive"),onClick:function(){return e.handleClick()}})}}]),t}(a.Component),y=function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).state={},a}return Object(l.a)(t,[{key:"handleCupClick",value:function(){this.props.handleCupClick({side:this.props.side,row:this.props.row,column:this.props.column})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"square"},this.props.hasCup&&r.a.createElement(f,{key:"cup_"+this.props.side+this.props.index,side:this.props.side,index:this.props.index,active:this.props.active,visible:this.props.hasCup,handleClick:function(){return e.handleCupClick()}}))}}]),t}(a.Component),v=function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).state={},a}return Object(l.a)(t,[{key:"handleCupClick",value:function(e){this.props.handleCupClick({side:e.side,row:e.row,column:e.column})}},{key:"render",value:function(){var e=this,n=this.props.grid.map((function(n,t){return r.a.createElement(y,{key:"square_"+e.props.side+t,index:t,side:e.props.side,row:n.row,column:n.column,hasCup:n.hasCup,active:n.active,handleCupClick:function(n){return e.handleCupClick(n)}})}));return r.a.createElement("div",{className:"rack rack-"+this.props.side},n)}}]),t}(a.Component),g=function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).state={},a}return Object(l.a)(t,[{key:"handleCupClick",value:function(e){this.props.currentTurn===this.props.myPlayer&&e.side!==this.props.myPlayer&&this.props.pubnub.publish({message:{isMove:!0,side:e.side,row:e.row,column:e.column},channel:this.props.gameChannel})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"table"},this.props.isPlaying&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{key:"left",side:"left",grid:this.props.left_grid,handleCupClick:function(n){return e.handleCupClick(n)}}),r.a.createElement(v,{key:"right",side:"right",grid:this.props.right_grid,handleCupClick:function(n){return e.handleCupClick(n)}})))}}]),t}(a.Component),C=function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){return Object(i.a)(this,t),n.call(this,e)}return Object(l.a)(t,[{key:"handleChange",value:function(e){this.props.handleChange(e.target.value)}},{key:"render",value:function(){var e=this.props.options.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)}));return r.a.createElement("div",{className:"custom-select"},r.a.createElement("label",null,this.props.label,r.a.createElement("select",{onChange:this.handleChange.bind(this),value:this.props.value},e)))}}]),t}(a.Component),w={value:0,name:"Standard",cups:10,formation:[{row:0,column:0},{row:2,column:0},{row:4,column:0},{row:6,column:0},{row:1,column:2},{row:3,column:2},{row:5,column:2},{row:2,column:4},{row:4,column:4},{row:3,column:6}]},k=[w,{value:1,name:"Desperation Honeycomb",cups:7,formation:[{row:1,column:2},{row:2,column:0},{row:2,column:4},{row:3,column:2},{row:4,column:0},{row:4,column:4},{row:5,column:2}]},{value:2,name:"Three Two One",cups:6,formation:[{row:1,column:0},{row:2,column:2},{row:3,column:0},{row:3,column:4},{row:4,column:2},{row:5,column:0}]},{value:3,name:"3-3 Offset Straight Line",cups:6,formation:[{row:2,column:0},{row:2,column:2},{row:2,column:4},{row:4,column:1},{row:4,column:3},{row:4,column:5}]},{value:4,name:"3-2 Offset Straight Line",cups:5,formation:[{row:2,column:0},{row:2,column:2},{row:2,column:4},{row:4,column:1},{row:4,column:3}]},{value:5,name:"Diamond",cups:4,formation:[{row:2,column:2},{row:3,column:0},{row:3,column:4},{row:4,column:2}]},{value:6,name:"2-2 Offset Straight Line",cups:4,formation:[{row:2,column:0},{row:2,column:2},{row:4,column:1},{row:4,column:3}]},{value:7,name:"Tiny Triangle",cups:3,formation:[{row:2,column:0},{row:3,column:2},{row:4,column:0}]},{value:8,name:"Play Button",cups:3,formation:[{row:2,column:0},{row:2,column:2},{row:4,column:1}]},{value:9,name:"Stoplight",cups:3,formation:[{row:3,column:0},{row:3,column:2},{row:3,column:4}]},{value:10,name:"Gentlemens",cups:2,formation:[{row:3,column:0},{row:3,column:2}]},{value:11,name:"Single Cup",cups:1,formation:[{row:3,column:0}]}],E=function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).state={formationOptions:a.setFormationOptions()},a}return Object(l.a)(t,[{key:"setFormationOptions",value:function(){return k.map((function(e){return{value:e.value,name:e.name}}))}},{key:"handleStart",value:function(){this.props.handleStart()}},{key:"handleEndTurn",value:function(){this.props.handleEndTurn(this.props.side)}},{key:"handleFormationChange",value:function(e){this.props.pubnub.publish({message:{rerack:!0,side:this.props.side,value:e},channel:this.props.gameChannel})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"side-info side-info-"+this.props.side},!this.props.currentTurn&&r.a.createElement("button",{className:"side-start-"+this.props.side,onClick:function(){return e.handleStart()}},this.props.side," start"),this.props.currentTurn===this.props.side&&r.a.createElement("div",{className:"side-info-controls side-info-controls-"+this.props.side},r.a.createElement("div",{className:"side-info-controls-sub"},r.a.createElement("h4",{className:"side-info-head side-info-head-"+this.props.side},this.props.side,"'s turn"),this.props.myTurn&&r.a.createElement("button",{onClick:function(){return e.handleEndTurn()}},"end turn")),this.props.myTurn&&r.a.createElement("div",{className:"side-info-controls-sub"},r.a.createElement(C,{key:"select"+this.props.side,label:"rerack",options:this.state.formationOptions,handleChange:function(n){return e.handleFormationChange(n)}}))))}}]),t}(a.Component),T=function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).state={left_grid:a.setGrid("left",w.formation),right_grid:a.setGrid("right",w.formation)},a}return Object(l.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;null!==this.props.gameChannel&&null!==this.props.pubnub&&this.props.pubnub.getMessage(this.props.gameChannel,(function(n){console.log(n),n.message.isMove&&e.updateGrid(n.message.side,n.message.row,n.message.column),n.message.rerack&&e.rerack(n.message.side,n.message.value)}))}},{key:"handleChooseStartSide",value:function(e){this.props.handleChooseStartSide(e)}},{key:"handleEndTurn",value:function(){this.props.handleEndTurn()}},{key:"rerack",value:function(e,n){var t="left"===e?"right":"left",a=k.filter((function(e){return e.value===parseInt(n)}))[0].formation,r=this.setGrid(t,a);"left"===t?this.setState({left_grid:r}):this.setState({right_grid:r})}},{key:"squareHasCup",value:function(e,n,t){var a,r=Object(b.a)(e);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.row===n&&o.column===t)return!0}}catch(s){r.e(s)}finally{r.f()}return!1}},{key:"setGrid",value:function(e,n){var t=this,a=Object(d.a)(Array(7).keys()),r=[];return a.forEach((function(o,s){a.forEach((function(a,o){var i="left"===e?s:6-s,l="left"===e?o:6-o,u=t.squareHasCup(n,i,l);r.push({row:i,column:l,hasCup:u,active:u})}))})),r}},{key:"updateGrid",value:function(e,n,t){var a="left"===e?this.state.left_grid:this.state.right_grid;a.forEach((function(e){e.row===n&&e.column===t&&(e.active=!e.active)})),"left"===e?this.setState({left_grid:a}):this.setState({right_grid:a})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"game"},this.props.isPlaying&&r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{key:"sideinfoleft",side:"left",currentTurn:this.props.currentTurn,myTurn:this.props.myTurn,myPlayer:this.props.myPlayer,pubnub:this.props.pubnub,gameChannel:this.props.gameChannel,handleStart:function(){return e.handleChooseStartSide("left")},handleEndTurn:function(){return e.handleEndTurn()}}),r.a.createElement(E,{key:"sideinforight",side:"right",currentTurn:this.props.currentTurn,myTurn:this.props.myTurn,myPlayer:this.props.myPlayer,pubnub:this.props.pubnub,gameChannel:this.props.gameChannel,handleStart:function(){return e.handleChooseStartSide("right")},handleEndTurn:function(){return e.handleEndTurn()}})),r.a.createElement(g,{left_formation:this.state.left_formation,right_formation:this.state.right_formation,left_grid:this.state.left_grid,right_grid:this.state.right_grid,isPlaying:this.props.isPlaying,pubnub:this.props.pubnub,gameChannel:this.props.gameChannel,currentTurn:this.props.currentTurn,myPlayer:this.props.myPlayer}))}}]),t}(a.Component),O=function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).state={newRoom:""},a}return Object(l.a)(t,[{key:"handleCreateRoom",value:function(){this.props.handleCreateRoom()}},{key:"handleJoinRoom",value:function(){this.props.handleJoinRoom(this.state.newRoom)}},{key:"handleEndGame",value:function(){this.props.handleEndGame()}},{key:"handleNewRoomChange",value:function(e){this.setState({newRoom:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"lobby"},r.a.createElement("h3",null,"BIP - BEER[INTERNET]PONG"),r.a.createElement("div",null,!this.props.isPlaying&&!this.props.isRoomCreator&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"lobby-section lobby-section-create"},r.a.createElement("button",{onClick:function(){return e.handleCreateRoom()}},"Create Game")),r.a.createElement("div",{className:"lobby-section lobby-section-join"},r.a.createElement("label",null,"Enter Game Code:",r.a.createElement("input",{type:"text",onChange:function(n){return e.handleNewRoomChange(n)}})),r.a.createElement("button",{onClick:function(){return e.handleJoinRoom()}},"Join Game"))),this.props.isPlaying&&r.a.createElement("div",{className:"lobby-section lobby-section-end"},r.a.createElement("button",{onClick:function(){return e.handleEndGame()}},"End Game")),this.props.isRoomCreator&&!this.props.isPlaying&&r.a.createElement("div",{className:"lobby-section lobby-section-room"},r.a.createElement("b",null,"Share This Game Code With Your Opponent: ",this.props.roomId))))}}]),t}(a.Component),S=(t(32),function(e){Object(c.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).pubnub=new p.a({publishKey:"pub-c-cbe88329-b9ae-47ef-8470-0a088c87c8ae",subscribeKey:"sub-c-1caa123c-8678-11ea-885f-2621b2dc68c7"}),a.state={currentTurn:null,myPlayer:null,myTurn:!1,isPlaying:!1,isRoomCreator:!1,createDisabled:!1},a.lobbyChannel=null,a.gameChannel=null,a.roomId=null,a.pubnub.init(Object(u.a)(a)),a}return Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,(function(n){n.message.startGame&&(e.gameChannel="bipgame--"+e.roomId,e.pubnub.subscribe({channels:[e.gameChannel]}),e.state.isRoomCreator||e.setState({myPlayer:"right"}),e.setState({isPlaying:!0,createDisabled:!0})),n.message.startSide&&e.setState({currentTurn:n.message.startSide,myTurn:e.state.myPlayer===n.message.startSide}),n.message.newSide&&e.setState({currentTurn:n.message.newSide,myTurn:e.state.myPlayer===n.message.newSide}),n.message.endGame&&n.message.side!==e.state.myPlayer&&alert("The Game Has Ended")}))}},{key:"makeid",value:function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*a));return n}},{key:"handleCreateRoom",value:function(){this.roomId=this.makeid(5),this.lobbyChannel="biplobby--"+this.roomId,this.pubnub.subscribe({channels:[this.lobbyChannel],withPresence:!0}),this.setState({myPlayer:"left",isRoomCreator:!0,createDisabled:!0,myTurn:!1})}},{key:"handleJoinRoom",value:function(e){var n=this;this.roomId=e,this.lobbyChannel="biplobby--"+this.roomId,this.pubnub.hereNow({channels:[this.lobbyChannel]}).then((function(e){e.totalOccupancy<2?(n.pubnub.subscribe({channels:[n.lobbyChannel],withPresence:!0}),n.setState({myPlayer:"right"}),n.pubnub.publish({message:{startGame:!0},channel:n.lobbyChannel})):alert("Game in progress. Try another room.")})).catch((function(e){console.log(e)}))}},{key:"handleEndGame",value:function(){this.pubnub.publish({message:{endGame:!0,side:this.state.myPlayer},channel:this.lobbyChannel}),this.setState({currentTurn:null,myPlayer:null,myTurn:!1,isPlaying:!1,isRoomCreator:!1,createDisabled:!1}),this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]}),this.lobbyChannel=null,this.gameChannel=null,this.roomId=null}},{key:"handleChooseStartSide",value:function(e){this.setState({currentTurn:e,myTurn:this.state.myPlayer===e}),this.pubnub.publish({message:{startSide:e},channel:this.lobbyChannel})}},{key:"handleEndTurn",value:function(){var e="left"===this.state.currentTurn?"right":"left";this.pubnub.publish({message:{newSide:e},channel:this.lobbyChannel})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"help"},r.a.createElement("a",{href:"https://github.com/mblumberg93/bip",target:"_blank"},"click here for instructions on how to play")),this.state.isPlaying&&r.a.createElement("div",{className:"you-are you-are-"+this.state.myPlayer},r.a.createElement("h2",null,"You are: ",r.a.createElement("span",{className:"you-are-side"},this.state.myPlayer))),r.a.createElement(O,{roomId:this.roomId,isPlaying:this.state.isPlaying,isRoomCreator:this.state.isRoomCreator,handleCreateRoom:function(){return e.handleCreateRoom()},handleJoinRoom:function(n){return e.handleJoinRoom(n)},handleEndGame:function(){return e.handleEndGame()}}),r.a.createElement(T,{currentTurn:this.state.currentTurn,myPlayer:this.state.myPlayer,myTurn:this.state.myTurn,isPlaying:this.state.isPlaying,pubnub:this.pubnub,gameChannel:this.gameChannel,handleChooseStartSide:function(n){return e.handleChooseStartSide(n)},handleEndTurn:function(){return e.handleEndTurn()}}))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.90ac6a8a.chunk.js.map