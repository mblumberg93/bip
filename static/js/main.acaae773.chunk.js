(this.webpackJsonpbip=this.webpackJsonpbip||[]).push([[0],{15:function(e,t,n){e.exports=n(33)},20:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),s=n.n(o),i=(n(20),n(1)),l=n(2),u=n(7),c=n(4),m=n(3),h=n(12),p=n.n(h),d=n(14),b=n(13),y=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"handleClick",value:function(){this.props.handleClick()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{key:"square_"+this.props.side+this.props.index,className:"cup cup-"+this.props.side+(this.props.visible?" cup-visible":"")+(this.props.active?"":" cup-inactive"),onClick:function(){return e.handleClick()}})}}]),n}(a.Component),f=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"handleCupClick",value:function(){this.props.handleCupClick({side:this.props.side,row:this.props.row,column:this.props.column})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"square"},this.props.hasCup&&r.a.createElement(y,{key:"cup_"+this.props.side+this.props.index,side:this.props.side,index:this.props.index,active:this.props.active,visible:this.props.hasCup,handleClick:function(){return e.handleCupClick()}}))}}]),n}(a.Component),g=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"handleCupClick",value:function(e){this.props.handleCupClick({side:e.side,row:e.row,column:e.column})}},{key:"render",value:function(){var e=this,t=this.props.grid.map((function(t,n){return r.a.createElement(f,{key:"square_"+e.props.side+n,index:n,side:e.props.side,row:t.row,column:t.column,hasCup:t.hasCup,active:t.active,handleCupClick:function(t){return e.handleCupClick(t)}})}));return r.a.createElement("div",{className:"rack rack-"+this.props.side},t)}}]),n}(a.Component),v=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"handleCupClick",value:function(e){this.props.currentTurn===this.props.myPlayer&&e.side!==this.props.myPlayer&&this.props.pubnub.publish({message:{isMove:!0,side:e.side,row:e.row,column:e.column},channel:this.props.gameChannel})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"table"},this.props.isPlaying&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{key:"left",side:"left",grid:this.props.left_grid,handleCupClick:function(t){return e.handleCupClick(t)}}),r.a.createElement(g,{key:"right",side:"right",grid:this.props.right_grid,handleCupClick:function(t){return e.handleCupClick(t)}})))}}]),n}(a.Component),C=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"handleChange",value:function(e){this.props.handleChange(e.target.value)}},{key:"render",value:function(){var e=this.props.options.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)}));return r.a.createElement("div",{className:"custom-select"},r.a.createElement("label",null,this.props.label,r.a.createElement("select",{onChange:this.handleChange.bind(this),value:this.props.value},e)))}}]),n}(a.Component),w={value:0,name:"Standard",cups:10,formation:[{row:0,column:0},{row:2,column:0},{row:4,column:0},{row:6,column:0},{row:1,column:2},{row:3,column:2},{row:5,column:2},{row:2,column:4},{row:4,column:4},{row:3,column:6}]},k=[w,{value:1,name:"Desperation Honeycomb",cups:7,formation:[{row:1,column:2},{row:2,column:0},{row:2,column:4},{row:3,column:2},{row:4,column:0},{row:4,column:4},{row:5,column:2}]},{value:2,name:"Three Two One",cups:6,formation:[{row:1,column:0},{row:2,column:2},{row:3,column:0},{row:3,column:4},{row:4,column:2},{row:5,column:0}]},{value:3,name:"3-3 Offset Straight Line",cups:6,formation:[{row:2,column:0},{row:2,column:2},{row:2,column:4},{row:4,column:1},{row:4,column:3},{row:4,column:5}]},{value:4,name:"3-2 Offset Straight Line",cups:5,formation:[{row:2,column:0},{row:2,column:2},{row:2,column:4},{row:4,column:1},{row:4,column:3}]},{value:5,name:"Diamond",cups:4,formation:[{row:2,column:2},{row:3,column:0},{row:3,column:4},{row:4,column:2}]},{value:6,name:"2-2 Offset Straight Line",cups:4,formation:[{row:2,column:0},{row:2,column:2},{row:4,column:1},{row:4,column:3}]},{value:7,name:"Tiny Triangle",cups:3,formation:[{row:2,column:0},{row:3,column:2},{row:4,column:0}]},{value:8,name:"Play Button",cups:3,formation:[{row:2,column:0},{row:2,column:2},{row:4,column:1}]},{value:9,name:"Stoplight",cups:3,formation:[{row:3,column:0},{row:3,column:2},{row:3,column:4}]},{value:10,name:"Gentlemens",cups:2,formation:[{row:3,column:0},{row:3,column:2}]},{value:11,name:"Single Cup",cups:1,formation:[{row:3,column:0}]}],E=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={formationOptions:a.setFormationOptions()},a}return Object(l.a)(n,[{key:"setFormationOptions",value:function(){return k.map((function(e){return{value:e.value,name:e.name}}))}},{key:"handleStart",value:function(){this.props.handleStart()}},{key:"handleEndTurn",value:function(){this.props.handleEndTurn(this.props.side)}},{key:"handleFormationChange",value:function(e){this.props.pubnub.publish({message:{rerack:!0,side:this.props.side,value:e},channel:this.props.gameChannel})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"side-info side-info-"+this.props.side},!this.props.currentTurn&&r.a.createElement("button",{className:"side-start-"+this.props.side,onClick:function(){return e.handleStart()}},this.props.side," start"),this.props.currentTurn===this.props.side&&r.a.createElement("div",{className:"side-info-controls side-info-controls-"+this.props.side},r.a.createElement("div",{className:"side-info-controls-sub"},r.a.createElement("h4",{className:"side-info-head side-info-head-"+this.props.side},this.props.side===this.props.myPlayer?"your":this.props.opponentsName+"'s"," turn"),this.props.myTurn&&r.a.createElement("button",{onClick:function(){return e.handleEndTurn()}},"end turn")),this.props.myTurn&&r.a.createElement("div",{className:"side-info-controls-sub"},r.a.createElement(C,{key:"select"+this.props.side,label:"rerack",options:this.state.formationOptions,handleChange:function(t){return e.handleFormationChange(t)}}))))}}]),n}(a.Component),N=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={left_grid:a.setGrid("left",w.formation),right_grid:a.setGrid("right",w.formation)},a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;null!==this.props.gameChannel&&null!==this.props.pubnub&&this.props.pubnub.getMessage(this.props.gameChannel,(function(t){t.message.isMove&&e.updateGrid(t.message.side,t.message.row,t.message.column),t.message.rerack&&e.rerack(t.message.side,t.message.value),t.message.resetGame&&e.setState({left_grid:e.setGrid("left",w.formation),right_grid:e.setGrid("right",w.formation)})}))}},{key:"handleChooseStartSide",value:function(e){this.props.handleChooseStartSide(e)}},{key:"handleEndTurn",value:function(){this.props.handleEndTurn()}},{key:"rerack",value:function(e,t){var n="left"===e?"right":"left",a=k.filter((function(e){return e.value===parseInt(t)}))[0].formation,r=this.setGrid(n,a);"left"===n?this.setState({left_grid:r}):this.setState({right_grid:r})}},{key:"squareHasCup",value:function(e,t,n){var a,r=Object(b.a)(e);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.row===t&&o.column===n)return!0}}catch(s){r.e(s)}finally{r.f()}return!1}},{key:"setGrid",value:function(e,t){var n=this,a=Object(d.a)(Array(7).keys()),r=[];return a.forEach((function(o,s){a.forEach((function(a,o){var i="left"===e?s:6-s,l="left"===e?o:6-o,u=n.squareHasCup(t,i,l);r.push({row:i,column:l,hasCup:u,active:u})}))})),r}},{key:"updateGrid",value:function(e,t,n){var a="left"===e?this.state.left_grid:this.state.right_grid;a.forEach((function(e){e.row===t&&e.column===n&&(e.active=!e.active)})),"left"===e?this.setState({left_grid:a}):this.setState({right_grid:a})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"game"},this.props.isPlaying&&r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{key:"sideinfoleft",side:"left",currentTurn:this.props.currentTurn,myTurn:this.props.myTurn,myPlayer:this.props.myPlayer,pubnub:this.props.pubnub,gameChannel:this.props.gameChannel,opponentsName:this.props.opponentsName,handleStart:function(){return e.handleChooseStartSide("left")},handleEndTurn:function(){return e.handleEndTurn()}}),r.a.createElement(E,{key:"sideinforight",side:"right",currentTurn:this.props.currentTurn,myTurn:this.props.myTurn,myPlayer:this.props.myPlayer,pubnub:this.props.pubnub,gameChannel:this.props.gameChannel,opponentsName:this.props.opponentsName,handleStart:function(){return e.handleChooseStartSide("right")},handleEndTurn:function(){return e.handleEndTurn()}})),r.a.createElement(v,{left_formation:this.state.left_formation,right_formation:this.state.right_formation,left_grid:this.state.left_grid,right_grid:this.state.right_grid,isPlaying:this.props.isPlaying,pubnub:this.props.pubnub,gameChannel:this.props.gameChannel,currentTurn:this.props.currentTurn,myPlayer:this.props.myPlayer}))}}]),n}(a.Component),T=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={newRoom:"",newName:""},a}return Object(l.a)(n,[{key:"handleCreateRoom",value:function(){this.props.handleCreateRoom(this.state.newName)}},{key:"handleJoinRoom",value:function(){this.props.handleJoinRoom(this.state.newRoom,this.state.newName)}},{key:"handleResetTable",value:function(){this.props.handleResetTable()}},{key:"handleNewRoomChange",value:function(e){this.setState({newRoom:e.target.value})}},{key:"handleNewNameChange",value:function(e){this.setState({newName:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"lobby"},r.a.createElement("h3",null,"BIP - BEER[INTERNET]PONG"),r.a.createElement("div",null,!this.props.isPlaying&&!this.props.isRoomCreator&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"lobby-section"},r.a.createElement("h4",null,"Step 1:")),r.a.createElement("div",{className:"lobby-section"},r.a.createElement("label",null,"Enter Team Name:",r.a.createElement("input",{type:"text",onChange:function(t){return e.handleNewNameChange(t)}}))),r.a.createElement("div",{className:"lobby-section"},r.a.createElement("h4",null,"Step 2:")),r.a.createElement("div",{className:"lobby-section lobby-section-create"},r.a.createElement("button",{onClick:function(){return e.handleCreateRoom()}},"Create Game")),r.a.createElement("div",{className:"lobby-section"},r.a.createElement("h4",null,"Or")),r.a.createElement("div",{className:"lobby-section lobby-section-join"},r.a.createElement("label",null,"Enter Game Code:",r.a.createElement("input",{type:"text",onChange:function(t){return e.handleNewRoomChange(t)}})),r.a.createElement("button",{onClick:function(){return e.handleJoinRoom()}},"Join Game"))),this.props.isPlaying&&r.a.createElement("div",{className:"lobby-section lobby-section-end"},r.a.createElement("button",{onClick:function(){return e.handleResetTable()}},"Reset Table")),this.props.isRoomCreator&&!this.props.isPlaying&&r.a.createElement("div",{className:"lobby-section lobby-section-room"},r.a.createElement("b",null,"Share This Game Code With Your Opponent: ",this.props.roomId))))}}]),n}(a.Component),S=(n(32),function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).pubnub=new p.a({publishKey:"pub-c-cbe88329-b9ae-47ef-8470-0a088c87c8ae",subscribeKey:"sub-c-1caa123c-8678-11ea-885f-2621b2dc68c7"}),a.state={currentTurn:null,myPlayer:null,myTurn:!1,isPlaying:!1,isRoomCreator:!1,createDisabled:!1,myName:"",opponentsName:""},a.lobbyChannel=null,a.gameChannel=null,a.roomId=null,a.pubnub.init(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,(function(t){t.message.startGame&&(e.gameChannel="bipgame--"+e.roomId,e.pubnub.subscribe({channels:[e.gameChannel]}),e.state.isRoomCreator?(e.setState({opponentsName:t.message.playerName}),alert("You opponent is "+t.message.playerName),e.sendCreatorName()):(e.setState({myName:t.message.playerName}),e.setState({myPlayer:"right"})),e.setState({isPlaying:!0,createDisabled:!0})),t.message.startSide&&e.setState({currentTurn:t.message.startSide,myTurn:e.state.myPlayer===t.message.startSide}),t.message.newSide&&e.setState({currentTurn:t.message.newSide,myTurn:e.state.myPlayer===t.message.newSide}),t.message.endGame&&t.message.side!==e.state.myPlayer&&alert("The Game Has Ended"),t.message.creatorNameUpdate&&!e.state.isRoomCreator&&(e.setState({opponentsName:t.message.playerName}),alert("You opponent is "+t.message.playerName))}))}},{key:"sendCreatorName",value:function(){this.pubnub.publish({message:{creatorNameUpdate:!0,playerName:this.state.myName},channel:this.lobbyChannel})}},{key:"makeid",value:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t}},{key:"handleCreateRoom",value:function(e){this.roomId=this.makeid(5),this.lobbyChannel="biplobby--"+this.roomId,this.pubnub.subscribe({channels:[this.lobbyChannel],withPresence:!0}),this.setState({myPlayer:"left",isRoomCreator:!0,createDisabled:!0,myTurn:!1,myName:e})}},{key:"handleJoinRoom",value:function(e,t){var n=this;this.roomId=e,this.lobbyChannel="biplobby--"+this.roomId,this.pubnub.hereNow({channels:[this.lobbyChannel]}).then((function(e){e.totalOccupancy<2?(n.pubnub.subscribe({channels:[n.lobbyChannel],withPresence:!0}),n.setState({myPlayer:"right"}),n.pubnub.publish({message:{startGame:!0,playerName:t},channel:n.lobbyChannel})):alert("Game in progress. Try another room.")})).catch((function(e){console.log(e)}))}},{key:"handleResetTable",value:function(){this.pubnub.publish({message:{resetGame:!0},channel:this.gameChannel})}},{key:"handleChooseStartSide",value:function(e){this.setState({currentTurn:e,myTurn:this.state.myPlayer===e}),this.pubnub.publish({message:{startSide:e},channel:this.lobbyChannel})}},{key:"handleEndTurn",value:function(){var e="left"===this.state.currentTurn?"right":"left";this.pubnub.publish({message:{newSide:e},channel:this.lobbyChannel})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"help"},r.a.createElement("a",{href:"https://github.com/mblumberg93/bip",target:"_blank"},"click here for instructions on how to play")),this.state.isPlaying&&r.a.createElement("div",{className:"you-are you-are-"+this.state.myPlayer},r.a.createElement("h2",null,"Welcome ",this.state.myName,"! Your side is ",r.a.createElement("span",{className:"you-are-side"},this.state.myPlayer))),r.a.createElement(T,{roomId:this.roomId,isPlaying:this.state.isPlaying,isRoomCreator:this.state.isRoomCreator,handleCreateRoom:function(t){return e.handleCreateRoom(t)},handleJoinRoom:function(t,n){return e.handleJoinRoom(t,n)},handleResetTable:function(){return e.handleResetTable()}}),r.a.createElement(N,{currentTurn:this.state.currentTurn,myPlayer:this.state.myPlayer,myTurn:this.state.myTurn,isPlaying:this.state.isPlaying,pubnub:this.pubnub,gameChannel:this.gameChannel,opponentsName:this.state.opponentsName,handleChooseStartSide:function(t){return e.handleChooseStartSide(t)},handleEndTurn:function(){return e.handleEndTurn()}}))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.acaae773.chunk.js.map